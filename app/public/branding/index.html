<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KPS Interiéry – Logo Variants Showcase</title>
  <meta name="description" content="Showcase of KPS Interiéry logo variants (original, accent, vertical)" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Copied from app/src/global.css to avoid modifying existing files */
      --primary: #2C3E50;
      --primary-light: #34495E;
      --accent: #E67E22;
      --gold: #D4A574;
      --gold-light: #E6C799;
      --gold-dark: #B8924F;
      --white: #FFFFFF;
      --light-gray: #F8F9FA;
      --gray: #6C757D;
      --dark-gray: #495057;

      --font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Helvetica, Arial, sans-serif;
      --radius: 12px;
      --shadow-sm: 0 2px 6px rgba(0,0,0,.08);
      --shadow-md: 0 10px 30px rgba(0,0,0,.12);
      --transition: all .25s ease;
      --maxw: 1200px;
    }

    * { box-sizing: border-box; }
    body { margin: 0; font-family: var(--font-family); color: var(--dark-gray); background: var(--white); }

    header {
      position: sticky; top: 0; z-index: 10;
      background: rgba(255,255,255,.8);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(0,0,0,.06);
    }
    .wrap { max-width: var(--maxw); margin: 0 auto; padding: 1rem 1.25rem; }
    .brand { display: flex; align-items: baseline; gap: .5rem; }
    .brand .kps { font-weight: 900; color: var(--primary); font-size: 1.5rem; letter-spacing: -0.02em; }
    .brand .subtitle { font-weight: 700; color: var(--accent); font-size: 1rem; }

    main { padding: 2rem 1.25rem; }
    .grid { max-width: var(--maxw); margin: 0 auto; display: grid; gap: 1.5rem; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }

    .card {
      background: #fff; border: 1px solid rgba(0,0,0,.06); border-radius: var(--radius);
      box-shadow: var(--shadow-sm);
      display: flex; flex-direction: column; overflow: hidden;
    }
    .card:hover { box-shadow: var(--shadow-md); transform: translateY(-2px); }

    .card-head { padding: 1rem 1.25rem; border-bottom: 1px solid rgba(0,0,0,.06); display: flex; align-items: center; justify-content: space-between; gap: .75rem; }
    .card-title { font-weight: 800; color: var(--primary); letter-spacing: -0.01em; }
    .actions { display: flex; gap: .5rem; }
    button.action {
      border: 1px solid rgba(0,0,0,.08); background: var(--accent); color: #fff; border-radius: 10px; padding: .5rem .75rem; font-weight: 700; cursor: pointer;
    }
    button.action.secondary { background: var(--primary); }
    button.action:disabled { opacity: .6; cursor: not-allowed; }

    .card-body { padding: 1rem; background: var(--light-gray); }
    .stage { aspect-ratio: 16/9; width: 100%; background: #fff; border-radius: 10px; border: 1px solid rgba(0,0,0,.06); display: grid; place-items: center; overflow: hidden; }
    .stage-inner { width: 92%; height: 92%; display: grid; place-items: center; }
    .stage svg { width: 100%; height: 100%; }

    footer { margin-top: 2rem; text-align: center; color: var(--gray); font-size: .9rem; }
    .hint { color: var(--gray); font-size: .9rem; padding: .5rem 1.25rem 1rem; }
    .note { background: #fff7ed; border: 1px solid #ffedd5; color: #9a3412; border-radius: 10px; padding: .75rem 1rem; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
  </style>
</head>
<body>
  <header>
    <div class="wrap brand">
      <div class="kps">KPS</div>
      <div class="subtitle">Interiéry</div>
    </div>
  </header>

  <main>
    <div class="wrap">
      <p class="hint note">
        Paste the full original SVG into <span class="mono">app/public/branding/logo-pasted.svg</span>.
        This page will load it and generate two variants automatically: Accent (brand colors) and Vertical.
      </p>
    </div>

    <section class="grid">
      <article class="card" id="card-original">
        <div class="card-head">
          <div class="card-title">Original (Pasted)</div>
          <div class="actions">
            <button class="action secondary" data-download="#stage-original">Download SVG</button>
          </div>
        </div>
        <div class="card-body">
          <div class="stage"><div class="stage-inner" id="stage-original" aria-label="Original logo"></div></div>
        </div>
      </article>

      <article class="card" id="card-accent">
        <div class="card-head">
          <div class="card-title">Accent Variant</div>
          <div class="actions">
            <button class="action secondary" data-download="#stage-accent">Download SVG</button>
          </div>
        </div>
        <div class="card-body">
          <div class="stage"><div class="stage-inner" id="stage-accent" aria-label="Accent logo variant"></div></div>
        </div>
      </article>

      <article class="card" id="card-vertical">
        <div class="card-head">
          <div class="card-title">Vertical Variant</div>
          <div class="actions">
            <button class="action secondary" data-download="#stage-vertical">Download SVG</button>
          </div>
        </div>
        <div class="card-body">
          <div class="stage"><div class="stage-inner" id="stage-vertical" aria-label="Vertical logo variant"></div></div>
        </div>
      </article>
    </section>

    <div class="wrap">
      <footer>
        © 2025 KPS Interiéry. Variants generated for preview purposes.
      </footer>
    </div>
  </main>

  <script>
  (function() {
    const SRC = 'logo-pasted.svg'; // same folder

    async function fetchInlineSVG(url) {
      const res = await fetch(url);
      if (!res.ok) throw new Error('Failed to load ' + url + ': ' + res.status);
      const text = await res.text();
      const parser = new DOMParser();
      const doc = parser.parseFromString(text, 'image/svg+xml');
      const svg = doc.querySelector('svg');
      if (!svg) throw new Error('No <svg> root found in ' + url);
      // Ensure viewBox exists for responsive scaling
      if (!svg.getAttribute('viewBox')) {
        const w = svg.getAttribute('width');
        const h = svg.getAttribute('height');
        if (w && h) svg.setAttribute('viewBox', `0 0 ${parseFloat(w)} ${parseFloat(h)}`);
        svg.removeAttribute('width');
        svg.removeAttribute('height');
      }
      // Remove any external font refs to keep it standalone
      Array.from(svg.querySelectorAll('style, link')).forEach(n => n.remove());
      return svg;
    }

    function deepCloneSVG(svg) {
      return svg.cloneNode(true);
    }

    // Map "pasted" colors -> brand colors
    // Original snippet mentioned: base brown #683e11 and gold/orange #e48406
    const COLOR_MAP_ACCENT = new Map([
      ['#683e11', 'var(--primary)'],
      ['#e48406', 'var(--accent)'],
      ['#E48406', 'var(--accent)'],
      ['#683E11', 'var(--primary)'],
    ]);

    function normalizeColor(c) {
      if (!c) return c;
      return c.trim().toLowerCase();
    }

    function recolorToBrand(svg) {
      const nodes = svg.querySelectorAll('[fill], [stroke]');
      nodes.forEach(el => {
        const f = normalizeColor(el.getAttribute('fill'));
        const s = normalizeColor(el.getAttribute('stroke'));
        if (COLOR_MAP_ACCENT.has(f)) el.setAttribute('fill', COLOR_MAP_ACCENT.get(f));
        if (COLOR_MAP_ACCENT.has(s)) el.setAttribute('stroke', COLOR_MAP_ACCENT.get(s));
      });
      // As a fallback, if nothing changed, gently tint accents by CSS variable
      // Any pure blacks or dark fills could be moved toward primary for cohesion
      return svg;
    }

    // Attempt a vertical layout: place title above, slogan below
    function makeVertical(svg) {
      const gTitle = svg.querySelector('g#title, g[id="title"], g[data-part="title"]');
      const gSlogan = svg.querySelector('g#slogan, g[id="slogan"], g[data-part="slogan"]');

      // If groups are present, stack them
      if (gTitle && gSlogan) {
        try {
          // Reset transforms to calculate bbox accurately
          gTitle.removeAttribute('transform');
          gSlogan.removeAttribute('transform');
          const tb = gTitle.getBBox();
          const sb = gSlogan.getBBox();

          // Compute spacing and center both groups
          const spacing = Math.max(16, tb.height * 0.2);
          const width = Math.max(tb.x + tb.width, sb.x + sb.width) - Math.min(tb.x, sb.x);
          const centerX = Math.min(tb.x, sb.x) + width / 2;

          const shiftTitleX = (centerX - (tb.x + tb.width / 2));
          const shiftSloganX = (centerX - (sb.x + sb.width / 2));

          // Move title to top, slogan below it
          gTitle.setAttribute('transform', `translate(${shiftTitleX}, ${-spacing/2})`);
          gSlogan.setAttribute('transform', `translate(${shiftSloganX}, ${tb.height + spacing})`);

          // Expand viewBox height if needed
          const vb = (svg.getAttribute('viewBox') || '').split(/\s+/).map(Number);
          if (vb.length === 4) {
            const [x, y, w, h] = vb;
            const extra = (sb.y + sb.height + spacing*1.5) - (y + h);
            if (extra > 0) svg.setAttribute('viewBox', `${x} ${y} ${w} ${h + Math.ceil(extra)}`);
          }
        } catch (e) {
          // If any error occurs, leave as-is
          console.warn('Vertical layout fallback:', e);
        }
      }
      return svg;
    }

    function mount(target, svg) {
      const slot = document.querySelector(target);
      if (!slot) return;
      slot.innerHTML = '';
      slot.appendChild(svg);
    }

    function downloadSVG(targetSelector, filename) {
      const slot = document.querySelector(targetSelector);
      if (!slot) return;
      const svg = slot.querySelector('svg');
      if (!svg) return;
      const clone = svg.cloneNode(true);
      // Inline computed CSS variables to static colors for portability in downloaded file
      const varMap = new Map([
        ['var(--primary)', getComputedStyle(document.documentElement).getPropertyValue('--primary').trim()],
        ['var(--accent)', getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()],
      ]);
      clone.querySelectorAll('[fill], [stroke]').forEach(el => {
        const f = el.getAttribute('fill');
        const s = el.getAttribute('stroke');
        if (varMap.has(f)) el.setAttribute('fill', varMap.get(f));
        if (varMap.has(s)) el.setAttribute('stroke', varMap.get(s));
      });
      const xml = new XMLSerializer().serializeToString(clone);
      const blob = new Blob([xml], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = filename; a.click();
      URL.revokeObjectURL(url);
    }

    async function init() {
      const actions = Array.from(document.querySelectorAll('button[data-download]'));
      actions.forEach(btn => {
        btn.addEventListener('click', () => {
          const target = btn.getAttribute('data-download');
          const filename = (btn.closest('.card')?.id || 'logo') + '.svg';
          downloadSVG(target, filename);
        });
      });

      let baseSVG;
      try {
        baseSVG = await fetchInlineSVG(SRC);
      } catch (err) {
        console.warn(err);
        // Fallback: simple typographic mark so the layout is visible even if fetch fails (e.g., opened via file:// scheme)
        const fallback = document.createElementNS('http://www.w3.org/2000/svg','svg');
        fallback.setAttribute('viewBox','0 0 1200 400');
        const g = document.createElementNS('http://www.w3.org/2000/svg','g');
        g.setAttribute('transform','translate(100 120)');
        const t1 = document.createElementNS('http://www.w3.org/2000/svg','text');
        t1.setAttribute('x','0'); t1.setAttribute('y','0'); t1.setAttribute('fill','var(--primary)'); t1.setAttribute('font-size','96'); t1.setAttribute('font-weight','900'); t1.textContent = 'KPS';
        const t2 = document.createElementNS('http://www.w3.org/2000/svg','text');
        t2.setAttribute('x','0'); t2.setAttribute('y','72'); t2.setAttribute('fill','var(--accent)'); t2.setAttribute('font-size','40'); t2.setAttribute('font-weight','700'); t2.textContent = 'Interiéry';
        g.appendChild(t1); g.appendChild(t2); fallback.appendChild(g);
        baseSVG = fallback;
      }

      // Original
      const original = deepCloneSVG(baseSVG);
      mount('#stage-original', original);

      // Accent recolor
      const accent = deepCloneSVG(baseSVG);
      recolorToBrand(accent);
      mount('#stage-accent', accent);

      // Vertical attempt
      const vertical = deepCloneSVG(accent); // recolored + vertical
      makeVertical(vertical);
      mount('#stage-vertical', vertical);
    }

    init();
  })();
  </script>
</body>
</html>
